(this["webpackJsonpreact-material-admin"]=this["webpackJsonpreact-material-admin"]||[]).push([[0],{224:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(19),o=n.n(r),c=n(310),s=n(313),l=n(16),d=n(48),p=n.n(d),h="#536DFE",j="#FF5C93",b="#FFC260",g="#3CD4A0",u="#9013FE",m=7.5,x={palette:{primary:{main:h,light:p()(h).lighten(m).toHexString(),dark:p()(h).darken(15).toHexString()},secondary:{main:j,light:p()(j).lighten(m).toHexString(),dark:p()(j).darken(15).toHexString(),contrastText:"#FFFFFF"},warning:{main:b,light:p()(b).lighten(m).toHexString(),dark:p()(b).darken(15).toHexString()},success:{main:g,light:p()(g).lighten(m).toHexString(),dark:p()(g).darken(15).toHexString()},info:{main:u,light:p()(u).lighten(m).toHexString(),dark:p()(u).darken(15).toHexString()},text:{primary:"#4A4A4A",secondary:"#6E6E6E",hint:"#B9B9B9"},background:{default:"#F6F7FF",light:"#F3F5FF"}},customShadows:{widget:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetDark:"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetWide:"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"},overrides:{MuiBackdrop:{root:{backgroundColor:"#4A4A4A1A"}},MuiMenu:{paper:{boxShadow:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"}},MuiSelect:{icon:{color:"#B9B9B9"}},MuiListItem:{root:{"&$selected":{backgroundColor:"#F3F5FF !important","&:focus":{backgroundColor:"#F3F5FF"}}},button:{"&:hover, &:focus":{backgroundColor:"#F3F5FF"}}},MuiTouchRipple:{child:{backgroundColor:"white"}},MuiTableRow:{root:{height:56}},MuiTableCell:{root:{borderBottom:"1px solid rgba(224, 224, 224, .5)",paddingLeft:24},head:{fontSize:"0.95rem"},body:{fontSize:"0.95rem"}},PrivateSwitchBase:{root:{marginLeft:10}}}},O=n(72),f={default:Object(O.a)(Object(l.a)(Object(l.a)({},x),{typography:{h1:{fontSize:"3rem"},h2:{fontSize:"2rem"},h3:{fontSize:"1.64rem"},h4:{fontSize:"1.5rem"},h5:{fontSize:"1.285rem"},h6:{fontSize:"1.142rem"}}}))},v=n(71),w=n(50),y=n(26),k=n(5),C=n(20),S=n.n(C),N=n(315),B=n(311),T=n(83),A=n(131),F=n.n(A),I=n(134),E=n(49),L=Object(E.a)((function(e){return{root:{display:"flex",maxWidth:"100vw",overflowX:"hidden"},content:{flexGrow:1,padding:e.spacing(3),width:"calc(100vw - 240px)",minHeight:"100vh"},contentShift:{width:"calc(100vw - ".concat(240+e.spacing(6),"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},fakeToolbar:Object(l.a)({},e.mixins.toolbar),link:{"&:not(:first-child)":{paddingLeft:15}}}})),R=n(8),M=n(288),D=n(289),z=n(166),W=n(290),U=n(291),P=n(292),G=n(121),H=Object(E.a)((function(e){var t,n;return{logotype:Object(k.a)({color:"white",marginLeft:e.spacing(2.5),marginRight:e.spacing(2.5),fontWeight:500,fontSize:18,whiteSpace:"nowrap"},e.breakpoints.down("xs"),{display:"none"}),appBar:{width:"100vw",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},hide:{display:"none"},grow:{flexGrow:1},search:{position:"relative",borderRadius:25,paddingLeft:e.spacing(2.5),width:36,backgroundColor:Object(G.fade)(e.palette.common.black,0),transition:e.transitions.create(["background-color","width"]),"&:hover":{cursor:"pointer",backgroundColor:Object(G.fade)(e.palette.common.black,.08)}},searchFocused:Object(k.a)({backgroundColor:Object(G.fade)(e.palette.common.black,.08),width:"100%"},e.breakpoints.up("md"),{width:250}),searchIcon:{width:36,right:0,height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create("right"),"&:hover":{cursor:"pointer"}},searchIconOpened:{right:e.spacing(1.25)},inputRoot:{color:"inherit",width:"100%"},inputInput:{height:36,padding:0,paddingRight:36+e.spacing(1.25),width:"100%"},messageContent:{display:"flex",flexDirection:"column"},headerMenu:{marginTop:e.spacing(7)},headerMenuList:{display:"flex",flexDirection:"column"},headerMenuItem:{"&:hover, &:focus":{backgroundColor:e.palette.background.light}},headerMenuButton:{marginLeft:e.spacing(2),padding:e.spacing(.5)},headerMenuButtonSandwich:(t={marginLeft:9},Object(k.a)(t,e.breakpoints.down("sm"),{marginLeft:0}),Object(k.a)(t,"padding",e.spacing(.5)),t),headerMenuButtonCollapse:{marginRight:e.spacing(2)},headerIcon:{fontSize:28,color:"rgba(255, 255, 255, 0.35)"},headerIconCollapse:{color:"white"},profileMenu:{minWidth:265},profileMenuUser:{display:"flex",flexDirection:"column",padding:e.spacing(2)},profileMenuItem:{color:e.palette.text.hint},profileMenuIcon:{marginRight:e.spacing(2),color:e.palette.text.hint,"&:hover":{color:e.palette.primary.main}},profileMenuLink:{fontSize:16,textDecoration:"none","&:hover":{cursor:"pointer"}},messageNotification:{height:"auto",display:"flex",alignItems:"center","&:hover, &:focus":{backgroundColor:e.palette.background.light}},messageNotificationSide:{display:"flex",flexDirection:"column",alignItems:"center",marginRight:e.spacing(2)},messageNotificationBodySide:{alignItems:"flex-start",marginRight:0},sendMessageButton:{margin:e.spacing(4),marginTop:e.spacing(2),marginBottom:e.spacing(2),textTransform:"none"},sendButtonIcon:{marginLeft:e.spacing(2)},purchaseBtn:(n={},Object(k.a)(n,e.breakpoints.down("sm"),{display:"none"}),Object(k.a)(n,"marginRight",e.spacing(3)),n)}})),_=(n(136),n(82)),J=n(80),X=n(7),$=n(135),K=n(2),V=["children","weight","size","colorBrightness","color"];Object(E.a)((function(e){return{badge:{fontWeight:600,height:16,minWidth:16}}}));function Y(e){var t=e.children,n=e.weight,a=e.size,i=e.colorBrightness,r=e.color,o=Object(v.a)(e,V),c=Object($.a)();return Object(K.jsx)(_.a,Object(l.a)(Object(l.a)({style:{color:q(r,c,i),fontWeight:Q(n),fontSize:Z(a,o.variant,c)}},o),{},{children:t}))}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";if(e&&t.palette[e]&&t.palette[e][n])return t.palette[e][n]}function Q(e){switch(e){case"light":return 300;case"medium":return 500;case"bold":return 600;default:return 400}}function Z(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;switch(e){case"sm":t=.8;break;case"md":t=1.5;break;case"xl":t=2;break;case"xxl":t=3;break;default:t=1}var i=n&&a.typography[n]?a.typography[n].fontSize:a.typography.fontSize+"px";return"calc(".concat(i," * ").concat(t,")")}var ee=i.a.createContext(),te=i.a.createContext();function ne(e,t){if("TOGGLE_SIDEBAR"===t.type)return Object(l.a)(Object(l.a)({},e),{},{isSidebarOpened:!e.isSidebarOpened});throw new Error("Unhandled action type: ".concat(t.type))}function ae(e){var t=e.children,n=i.a.useReducer(ne,{isSidebarOpened:!0}),a=Object(R.a)(n,2),r=a[0],o=a[1];return Object(K.jsx)(ee.Provider,{value:r,children:Object(K.jsx)(te.Provider,{value:o,children:t})})}function ie(){var e=i.a.useContext(ee);if(void 0===e)throw new Error("useLayoutState must be used within a LayoutProvider");return e}function re(){var e=i.a.useContext(te);if(void 0===e)throw new Error("useLayoutDispatch must be used within a LayoutProvider");return e}function oe(e){e({type:"TOGGLE_SIDEBAR"})}var ce=i.a.createContext(),se=i.a.createContext();function le(e,t){switch(t.type){case"LOGIN_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!0});case"SIGN_OUT_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!1});default:throw new Error("Unhandled action type: ".concat(t.type))}}function de(e){var t=e.children,n=i.a.useReducer(le,{isAuthenticated:!!localStorage.getItem("id_token")}),a=Object(R.a)(n,2),r=a[0],o=a[1];return Object(K.jsx)(ce.Provider,{value:r,children:Object(K.jsx)(se.Provider,{value:o,children:t})})}function pe(){var e=i.a.useContext(se);if(void 0===e)throw new Error("useUserDispatch must be used within a UserProvider");return e}function he(e,t,n,a,i,r){r(!1),i(!0),t&&n?setTimeout((function(){localStorage.setItem("id_token",1),r(null),i(!1),e({type:"LOGIN_SUCCESS"}),a.push("/app/dashboard")}),2e3):(e({type:"LOGIN_FAILURE"}),r(!0),i(!1))}function je(e){var t=H(),n=ie(),i=re(),r=pe(),o=Object(a.useState)(null),c=Object(R.a)(o,2),s=c[0],l=c[1];return Object(K.jsx)(M.a,{position:"fixed",className:t.appBar,children:Object(K.jsxs)(D.a,{className:t.toolbar,children:[Object(K.jsx)(T.a,{color:"inherit",onClick:function(){return oe(i)},className:S()(t.headerMenuButtonSandwich,t.headerMenuButtonCollapse),children:n.isSidebarOpened?Object(K.jsx)(W.a,{classes:{root:S()(t.headerIcon,t.headerIconCollapse)}}):Object(K.jsx)(U.a,{classes:{root:S()(t.headerIcon,t.headerIconCollapse)}})}),Object(K.jsx)(Y,{variant:"h6",weight:"medium",className:t.logotype,children:"TurnTheBus Admin"}),Object(K.jsx)("div",{className:t.grow}),Object(K.jsx)(T.a,{"aria-haspopup":"true",color:"inherit",className:t.headerMenuButton,"aria-controls":"profile-menu",onClick:function(e){return l(e.currentTarget)},children:Object(K.jsx)(P.a,{classes:{root:t.headerIcon}})}),Object(K.jsxs)(z.a,{id:"profile-menu",open:Boolean(s),anchorEl:s,onClose:function(){return l(null)},className:t.headerMenu,classes:{paper:t.profileMenu},disableAutoFocusItem:!0,children:[Object(K.jsx)("div",{className:t.profileMenuUser,children:Object(K.jsx)(Y,{variant:"h4",weight:"medium",children:"John Doe"})}),Object(K.jsx)("div",{className:t.profileMenuUser,children:Object(K.jsx)(Y,{className:t.profileMenuLink,color:"primary",onClick:function(){return t=r,n=e.history,localStorage.removeItem("id_token"),t({type:"SIGN_OUT_SUCCESS"}),void n.push("/login");var t,n},children:"Sign Out"})})]})]})})}var be=n(320),ge=n(229),ue=n(297),me=n(298),xe=n(299),Oe=n(300),fe=n(301),ve=Object(E.a)((function(e){var t;return{menuButton:{marginLeft:12,marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(k.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+40},e.breakpoints.down("sm"),{width:240}),toolbar:Object(l.a)(Object(l.a)({},e.mixins.toolbar),{},Object(k.a)({},e.breakpoints.down("sm"),{display:"none"})),content:{flexGrow:1,padding:e.spacing(3)},mobileBackButton:(t={marginTop:e.spacing(.5),marginLeft:18},Object(k.a)(t,e.breakpoints.only("sm"),{marginTop:e.spacing(.625)}),Object(k.a)(t,e.breakpoints.up("md"),{display:"none"}),t)}})),we=n(293),ye=n(230),ke=n(231),Ce=n(294),Se=n(296),Ne=n(295),Be=Object(E.a)((function(e){return{link:{textDecoration:"none","&:hover, &:focus":{backgroundColor:e.palette.background.light}},externalLink:{display:"flex",justifyContent:"center",alignItems:"center",textDecoration:"none"},linkActive:{backgroundColor:e.palette.background.light},linkNested:{paddingLeft:0,"&:hover, &:focus":{backgroundColor:"#FFFFFF"}},linkIcon:{marginRight:e.spacing(1),color:e.palette.text.secondary+"99",transition:e.transitions.create("color"),width:24,display:"flex",justifyContent:"center"},linkIconActive:{color:e.palette.primary.main},linkText:{padding:0,color:e.palette.text.secondary+"CC",transition:e.transitions.create(["opacity","color"]),fontSize:16},linkTextActive:{color:e.palette.text.primary},linkTextHidden:{opacity:0},nestedList:{paddingLeft:e.spacing(2)+30},sectionTitle:{marginLeft:e.spacing(4.5),marginTop:e.spacing(2),marginBottom:e.spacing(2)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(4),height:1,backgroundColor:"#D8D8D880"}}})),Te=Object(E.a)((function(e){return{dotBase:{width:8,height:8,backgroundColor:e.palette.text.hint,borderRadius:"50%",transition:e.transitions.create("background-color")},dotSmall:{width:5,height:5},dotLarge:{width:11,height:11}}}));function Ae(e){var t,n=e.size,a=e.color,i=Te(),r=Object($.a)();return Object(K.jsx)("div",{className:S()(i.dotBase,(t={},Object(k.a)(t,i.dotLarge,"large"===n),Object(k.a)(t,i.dotSmall,"small"===n),t)),style:{backgroundColor:a&&r.palette[a]&&r.palette[a].main}})}function Fe(e){var t,n,i,r,o,c=e.link,s=e.icon,d=e.label,p=e.children,h=e.location,j=e.isSidebarOpened,b=e.nested,g=e.type,u=Be(),m=Object(a.useState)(!1),x=Object(R.a)(m,2),O=x[0],f=x[1],v=c&&(h.pathname===c||-1!==h.pathname.indexOf(c));return"title"===g?Object(K.jsx)(_.a,{className:S()(u.linkText,u.sectionTitle,Object(k.a)({},u.linkTextHidden,!j)),children:d}):"divider"===g?Object(K.jsx)(we.a,{className:u.divider}):c&&c.includes("http")?Object(K.jsx)(ye.a,{button:!0,className:u.link,classes:{root:S()(u.linkRoot,(r={},Object(k.a)(r,u.linkActive,v&&!b),Object(k.a)(r,u.linkNested,b),r))},disableRipple:!0,children:Object(K.jsxs)("a",{className:u.externalLink,href:c,children:[Object(K.jsx)(ke.a,{className:S()(u.linkIcon,Object(k.a)({},u.linkIconActive,v)),children:b?Object(K.jsx)(Ae,{color:v&&"primary"}):s}),Object(K.jsx)(Ce.a,{classes:{primary:S()(u.linkText,(o={},Object(k.a)(o,u.linkTextActive,v),Object(k.a)(o,u.linkTextHidden,!j),o))},primary:d})]})}):p?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(ye.a,{button:!0,component:c&&w.b,onClick:function(e){j&&(e.preventDefault(),f(!O))},className:u.link,to:c,disableRipple:!0,children:[Object(K.jsx)(ke.a,{className:S()(u.linkIcon,Object(k.a)({},u.linkIconActive,v)),children:s||Object(K.jsx)(Ne.a,{})}),Object(K.jsx)(Ce.a,{classes:{primary:S()(u.linkText,(i={},Object(k.a)(i,u.linkTextActive,v),Object(k.a)(i,u.linkTextHidden,!j),i))},primary:d})]}),p&&Object(K.jsx)(Se.a,{in:O&&j,timeout:"auto",unmountOnExit:!0,className:u.nestedList,children:Object(K.jsx)(ge.a,{component:"div",disablePadding:!0,children:p.map((function(e){return Object(K.jsx)(Fe,Object(l.a)({location:h,isSidebarOpened:j,classes:u,nested:!0},e),e&&e.link)}))})})]}):Object(K.jsxs)(ye.a,{button:!0,component:c&&w.b,to:c,className:u.link,classes:{root:S()(u.linkRoot,(t={},Object(k.a)(t,u.linkActive,v&&!b),Object(k.a)(t,u.linkNested,b),t))},disableRipple:!0,children:[Object(K.jsx)(ke.a,{className:S()(u.linkIcon,Object(k.a)({},u.linkIconActive,v)),children:b?Object(K.jsx)(Ae,{color:v&&"primary"}):s}),Object(K.jsx)(Ce.a,{classes:{primary:S()(u.linkText,(n={},Object(k.a)(n,u.linkTextActive,v),Object(k.a)(n,u.linkTextHidden,!j),n))},primary:d})]})}var Ie=[{id:0,label:"Dashboard",link:"/app/dashboard",icon:Object(K.jsx)(ue.a,{})},{id:1,label:"Conversations",link:"/app/chat",icon:Object(K.jsx)(me.a,{})},{id:2,label:"Content",link:"/app/content",icon:Object(K.jsx)(xe.a,{})},{id:3,label:"Rules",link:"/app/rules",icon:Object(K.jsx)(Oe.a,{})},{id:4,label:"Members",link:"/app/members",icon:Object(K.jsx)(fe.a,{})}];var Ee=Object(y.g)((function(e){var t,n,i=e.location,r=ve(),o=Object($.a)(),c=ie().isSidebarOpened,s=re(),d=Object(a.useState)(!0),p=Object(R.a)(d,2),h=p[0],j=p[1];return Object(a.useEffect)((function(){return window.addEventListener("resize",b),b(),function(){window.removeEventListener("resize",b)}})),Object(K.jsxs)(be.a,{variant:h?"permanent":"temporary",className:S()(r.drawer,(t={},Object(k.a)(t,r.drawerOpen,c),Object(k.a)(t,r.drawerClose,!c),t)),classes:{paper:S()((n={},Object(k.a)(n,r.drawerOpen,c),Object(k.a)(n,r.drawerClose,!c),n))},open:c,children:[Object(K.jsx)("div",{className:r.toolbar}),Object(K.jsx)("div",{className:r.mobileBackButton,children:Object(K.jsx)(T.a,{onClick:function(){return oe(s)},children:Object(K.jsx)(W.a,{classes:{root:S()(r.headerIcon,r.headerIconCollapse)}})})}),Object(K.jsx)(ge.a,{className:r.sidebarList,children:Ie.map((function(e){return Object(K.jsx)(Fe,Object(l.a)({location:i,isSidebarOpened:c},e),e.id)}))})]});function b(){var e=window.innerWidth<o.breakpoints.values.md;e&&h?j(!1):e||h||j(!0)}})),Le=Object(E.a)((function(e){return{pageTitleContainer:{display:"flex",justifyContent:"space-between",marginBottom:e.spacing(4),marginTop:e.spacing(5)},typo:{color:e.palette.text.hint},button:{boxShadow:e.customShadows.widget,textTransform:"none","&:active":{boxShadow:e.customShadows.widgetWide}}}}));function Re(e){var t=Le();return Object(K.jsxs)("div",{className:t.pageTitleContainer,children:[Object(K.jsx)(Y,{className:t.typo,variant:"h1",size:"sm",children:e.title}),e.button&&e.button]})}function Me(e){return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(Re,{title:"Dashboard"})})}var De=Object(E.a)((function(e){return{}})),ze=n(69),We=n(70),Ue=n(74),Pe=n(78),Ge=n(122),He=n(303),_e=n(140),Je=n(321),Xe=n(306),$e=n(161),Ke=n.n($e),Ve=n(75),Ye=n.n(Ve),qe=function(e){Object(Ue.a)(n,e);var t=Object(Pe.a)(n);function n(){var e;Object(ze.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={phoneUsers:[],messages:[{text:"Click on a conversation on the left"}]},e.messagesEndRef=i.a.createRef(),e.scrollToBottom=function(){e.messagesEndRef.current.scrollIntoView({behavior:"smooth"})},e}return Object(We.a)(n,[{key:"componentDidMount",value:function(){var e=this;Ye.a.get("/api/phoneusers").then((function(t){var n=t.data;e.setState({phoneUsers:n})})),this.scrollToBottom()}},{key:"getMessages",value:function(e){var t=this;Ye.a.get("/api/messages",{params:{user:e}}).then((function(e){var n=e.data.map((function(e){var t=new Date(e.createdAt);return e.createdTime=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),e}));t.setState({messages:n})}))}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props.classes,n={color:"blue"};return Object(K.jsx)("div",{children:Object(K.jsxs)(He.a,{container:!0,component:Ge.a,className:t.chatSection,children:[Object(K.jsx)(He.a,{item:!0,xs:3,className:t.borderRight500,children:Object(K.jsx)(ge.a,{children:this.state.phoneUsers.map((function(t){return Object(K.jsxs)(ye.a,{button:!0,onClick:function(){e.getMessages(t._id)},children:[Object(K.jsx)(ke.a,{children:Object(K.jsx)(Je.a,{alt:t.name})}),Object(K.jsx)(Ce.a,{primary:t.name})]},t.name)}))})}),Object(K.jsxs)(He.a,{item:!0,xs:9,children:[Object(K.jsxs)(ge.a,{className:t.messageArea,children:[this.state.messages.map((function(e,t){return Object(K.jsx)(ye.a,{children:Object(K.jsxs)(He.a,{container:!0,children:[Object(K.jsx)(He.a,{item:!0,xs:12,children:e.reply?Object(K.jsx)(Ce.a,{align:"right",primary:e.text,primaryTypographyProps:{style:n}}):Object(K.jsx)(Ce.a,{align:"left",primary:e.text})}),Object(K.jsx)(He.a,{item:!0,xs:12,children:e.reply?Object(K.jsx)(Ce.a,{align:"right",secondary:e.createdTime,secondaryTypographyProps:{style:n}}):Object(K.jsx)(Ce.a,{align:"left",secondary:e.createdTime})})]})},t)})),Object(K.jsx)("div",{ref:this.messagesEndRef})]}),Object(K.jsx)(we.a,{}),Object(K.jsxs)(He.a,{container:!0,style:{padding:"20px"},children:[Object(K.jsx)(He.a,{item:!0,xs:11,children:Object(K.jsx)(_e.a,{id:"outlined-basic-email",label:"Send custom reply",fullWidth:!0})}),Object(K.jsx)(He.a,{item:!0,xs:1,align:"right",children:Object(K.jsx)(Xe.a,{color:"primary","aria-label":"add",children:Object(K.jsx)(Ke.a,{})})})]})]})]})})}}]),n}(i.a.Component),Qe=Object(X.a)((function(e){return{table:{minWidth:650},chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"70vh",overflowY:"auto"}}}),{withTheme:!0})(qe);function Ze(){De();return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(Qe,{})})}var et=Object(E.a)((function(e){return{}})),tt=n(307),nt=n(309),at=n(308),it=n(314),rt=function(e){Object(Ue.a)(n,e);var t=Object(Pe.a)(n);function n(){var e;Object(ze.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={templates:[],editing:!1},e}return Object(We.a)(n,[{key:"componentDidMount",value:function(){var e=this;Ye.a.get("/api/contents").then((function(t){var n=t.data;e.setState({templates:n})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(it.a,{spacing:2,direction:"row",sx:{mb:2},children:Object(K.jsx)(J.a,{sx:{mb:20},variant:"contained",children:"Add content template"})}),Object(K.jsx)(He.a,{container:!0,spacing:2,children:this.state.templates.map((function(n){return Object(K.jsx)(He.a,{item:!0,xs:6,children:Object(K.jsxs)(tt.a,{className:t.root,variant:"outlined",children:[Object(K.jsx)(at.a,{children:e.state.editing?Object(K.jsx)("textarea",{children:"editing"}):Object(K.jsxs)("div",{children:[Object(K.jsx)(_.a,{variant:"h3",className:t.title,color:"textSecondary",gutterBottom:!0,children:n.key}),Object(K.jsx)(_.a,{children:n.text})]})}),Object(K.jsx)(nt.a,{children:Object(K.jsx)(J.a,{size:"small",onClick:function(){return e.setState({editing:!0})},children:"Edit"})})]})})}))})]})}}]),n}(i.a.Component),ot=Object(X.a)((function(e){return{}}),{withTheme:!0})(rt);function ct(){et();return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(ot,{})})}var st=n(165),lt=n(316),dt=n(163),pt=Object(st.a)(),ht=Object(lt.a)((function(e){var t="dark"===e.palette.mode;return{root:{"& .MuiDataGrid-cell--editing":{backgroundColor:"rgb(255,215,115, 0.19)",color:"#1a3e72"},"& .Mui-error":{backgroundColor:"rgb(126,10,15, ".concat(t?0:.1,")"),color:e.palette.error.main}}}}),{defaultTheme:pt}),jt=[{field:"name",headerName:"Name",width:160,editable:!1},{field:"trigger",headerName:"Trigger word",width:160,editable:!0},{field:"ContentKeys",headerName:"Content template",width:200,editable:!0}];function bt(){var e=ht(),t=i.a.useState({}),n=Object(R.a)(t,2),r=n[0],o=n[1],c=i.a.useState([]),s=Object(R.a)(c,2),d=s[0],p=s[1],h=i.a.useCallback((function(e){var t=Object(l.a)({},e);Object.keys(t).forEach((function(e){var n=t[e].isPaid.value&&!t[e].paidAt.value;t[e].paidAt=Object(l.a)(Object(l.a)({},t[e].paidAt),{},{error:n})})),o(t)}),[]);return Object(a.useEffect)((function(){Ye.a.get("/api/rules").then((function(e){var t=e.data;t.map((function(e,t){e.id=t})),p(t)}))}),[]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(it.a,{spacing:2,direction:"row",sx:{mb:2},children:Object(K.jsx)(J.a,{sx:{mb:20},variant:"contained",children:"Add rule"})}),Object(K.jsx)("div",{style:{height:400},children:Object(K.jsx)(dt.a,{className:e.root,rows:d,columns:jt,editMode:"row",editRowsModel:r,onEditRowsModelChange:h})})]})}var gt=Object(E.a)((function(e){return{}}));function ut(){gt();return Object(K.jsx)(K.Fragment,{})}var mt=Object(y.g)((function(e){var t=L(),n=ie();return Object(K.jsx)("div",{className:t.root,children:Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(je,{history:e.history}),Object(K.jsx)(Ee,{}),Object(K.jsxs)("div",{className:S()(t.content,Object(k.a)({},t.contentShift,n.isSidebarOpened)),children:[Object(K.jsx)("div",{className:t.fakeToolbar}),Object(K.jsxs)(y.d,{children:[Object(K.jsx)(y.b,{path:"/app/dashboard",component:Me}),Object(K.jsx)(y.b,{path:"/app/chat",component:Ze}),Object(K.jsx)(y.b,{path:"/app/content",component:ct}),Object(K.jsx)(y.b,{path:"/app/rules",component:bt}),Object(K.jsx)(y.b,{path:"/app/members",component:ut})]}),Object(K.jsxs)(N.a,{mt:5,width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)(B.a,{color:"primary",href:"",target:"_blank",className:t.link,children:"TurnTheBus"}),Object(K.jsx)(B.a,{color:"primary",href:"",target:"_blank",className:t.link,children:"About Us"})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)(B.a,{href:"",target:"_blank",children:Object(K.jsx)(T.a,{"aria-label":"facebook",children:Object(K.jsx)(F.a,{path:I.a,size:1,color:"#6E6E6E99"})})}),Object(K.jsx)(B.a,{href:"",target:"_blank",children:Object(K.jsx)(T.a,{"aria-label":"youtube",children:Object(K.jsx)(F.a,{path:I.b,size:1,color:"#6E6E6E99"})})})]})]})]})]})})})),xt=Object(E.a)((function(e){return{container:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:e.palette.primary.main,position:"absolute",top:0,left:0},logotype:Object(k.a)({display:"flex",alignItems:"center",marginBottom:e.spacing(12)},e.breakpoints.down("sm"),{display:"none"}),logotypeText:{fontWeight:500,color:"white",marginLeft:e.spacing(2)},logotypeIcon:{width:70,marginRight:e.spacing(2)},paperRoot:{boxShadow:e.customShadows.widgetDark,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:e.spacing(8),paddingBottom:e.spacing(8),paddingLeft:e.spacing(6),paddingRight:e.spacing(6),maxWidth:404},textRow:{marginBottom:e.spacing(10),textAlign:"center"},errorCode:{fontSize:148,fontWeight:600},safetyText:{fontWeight:300,color:e.palette.text.hint},backButton:{boxShadow:e.customShadows.widget,textTransform:"none",fontSize:22}}})),Ot=n.p+"static/media/logo.d0e27845.svg";function ft(){var e=xt();return Object(K.jsxs)(He.a,{container:!0,className:e.container,children:[Object(K.jsxs)("div",{className:e.logotype,children:[Object(K.jsx)("img",{className:e.logotypeIcon,src:Ot,alt:"logo"}),Object(K.jsx)(_.a,{variant:"h3",color:"white",className:e.logotypeText,children:"Material Admin"})]}),Object(K.jsxs)(Ge.a,{classes:{root:e.paperRoot},children:[Object(K.jsx)(_.a,{variant:"h1",color:"primary",className:S()(e.textRow,e.errorCode),children:"404"}),Object(K.jsx)(_.a,{variant:"h5",color:"primary",className:e.textRow,children:"Oops. Looks like the page you're looking for no longer exists"}),Object(K.jsx)(_.a,{variant:"h6",color:"text",colorBrightness:"secondary",className:S()(e.textRow,e.safetyText),children:"But we're here to bring you back to safety"}),Object(K.jsx)(J.a,{variant:"contained",color:"primary",component:w.b,to:"/",size:"large",className:e.backButton,children:"Back to Home"})]})]})}var vt=n(317),wt=n(312),yt=n(302),kt=n(236),Ct=Object(E.a)((function(e){var t;return{container:{height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0},logotypeContainer:(t={backgroundColor:e.palette.primary.main,width:"60%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Object(k.a)(t,e.breakpoints.down("md"),{width:"50%"}),Object(k.a)(t,e.breakpoints.down("md"),{display:"none"}),t),logotypeImage:{width:165,marginBottom:e.spacing(4)},logotypeText:Object(k.a)({color:"white",fontWeight:500,fontSize:84},e.breakpoints.down("md"),{fontSize:48}),formContainer:Object(k.a)({width:"40%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},e.breakpoints.down("md"),{width:"50%"}),form:{width:320},tab:{fontWeight:400,fontSize:18},greeting:{fontWeight:500,textAlign:"center",marginTop:e.spacing(4)},subGreeting:{fontWeight:500,textAlign:"center",marginTop:e.spacing(2)},googleButton:{marginTop:e.spacing(6),boxShadow:e.customShadows.widget,backgroundColor:"white",width:"100%",textTransform:"none"},googleButtonCreating:{marginTop:0},googleIcon:{width:30,marginRight:e.spacing(2)},creatingButtonContainer:{marginTop:e.spacing(2.5),height:46,display:"flex",justifyContent:"center",alignItems:"center"},createAccountButton:{height:46,textTransform:"none"},formDividerContainer:{marginTop:e.spacing(4),marginBottom:e.spacing(4),display:"flex",alignItems:"center"},formDividerWord:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},formDivider:{flexGrow:1,height:1,backgroundColor:e.palette.text.hint+"40"},errorMessage:{textAlign:"center"},textFieldUnderline:{"&:before":{borderBottomColor:e.palette.primary.light},"&:after":{borderBottomColor:e.palette.primary.main},"&:hover:before":{borderBottomColor:"".concat(e.palette.primary.light," !important")}},textField:{borderBottomColor:e.palette.background.light},formButtons:{width:"100%",marginTop:e.spacing(4),display:"flex",justifyContent:"space-between",alignItems:"center"},forgetButton:{textTransform:"none",fontWeight:400},loginLoader:{marginLeft:e.spacing(4)},copyright:Object(k.a)({marginTop:e.spacing(4),whiteSpace:"nowrap"},e.breakpoints.up("md"),{position:"absolute",bottom:e.spacing(2)})}})),St=n.p+"static/media/logo.d0e27845.svg",Nt=n.p+"static/media/google.bbce75f8.svg";var Bt=Object(y.g)((function(e){var t=Ct(),n=pe(),r=Object(a.useState)(!1),o=Object(R.a)(r,2),c=o[0],s=o[1],l=Object(a.useState)(null),d=Object(R.a)(l,2),p=d[0],h=d[1],j=Object(a.useState)(0),b=Object(R.a)(j,2),g=b[0],u=b[1],m=Object(a.useState)(""),x=Object(R.a)(m,2),O=x[0],f=x[1],v=Object(a.useState)("admin@turnthebus.com"),w=Object(R.a)(v,2),y=w[0],k=w[1],C=Object(a.useState)("password"),N=Object(R.a)(C,2),B=N[0],T=N[1];return Object(K.jsxs)(He.a,{container:!0,className:t.container,children:[Object(K.jsxs)("div",{className:t.logotypeContainer,children:[Object(K.jsx)("img",{src:St,alt:"logo",className:t.logotypeImage}),Object(K.jsx)(_.a,{className:t.logotypeText,children:"TurnTheBus Admin"})]}),Object(K.jsx)("div",{className:t.formContainer,children:Object(K.jsxs)("div",{className:t.form,children:[Object(K.jsxs)(vt.a,{value:g,onChange:function(e,t){return u(t)},indicatorColor:"primary",textColor:"primary",centered:!0,children:[Object(K.jsx)(wt.a,{label:"Login",classes:{root:t.tab}}),Object(K.jsx)(wt.a,{label:"New User",classes:{root:t.tab}})]}),0===g&&Object(K.jsxs)(i.a.Fragment,{children:[Object(K.jsx)(_.a,{variant:"h1",className:t.greeting,children:"Good Morning, User"}),Object(K.jsxs)(J.a,{size:"large",className:t.googleButton,children:[Object(K.jsx)("img",{src:Nt,alt:"google",className:t.googleIcon}),"\xa0Sign in with Google"]}),Object(K.jsxs)("div",{className:t.formDividerContainer,children:[Object(K.jsx)("div",{className:t.formDivider}),Object(K.jsx)(_.a,{className:t.formDividerWord,children:"or"}),Object(K.jsx)("div",{className:t.formDivider})]}),Object(K.jsx)(yt.a,{in:p,children:Object(K.jsx)(_.a,{color:"secondary",className:t.errorMessage,children:"Something is wrong with your login or password :("})}),Object(K.jsx)(_e.a,{id:"email",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:y,onChange:function(e){return k(e.target.value)},margin:"normal",placeholder:"Email Adress",type:"email",fullWidth:!0}),Object(K.jsx)(_e.a,{id:"password",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:B,onChange:function(e){return T(e.target.value)},margin:"normal",placeholder:"Password",type:"password",fullWidth:!0}),Object(K.jsxs)("div",{className:t.formButtons,children:[c?Object(K.jsx)(kt.a,{size:26,className:t.loginLoader}):Object(K.jsx)(J.a,{disabled:0===y.length||0===B.length,onClick:function(){return he(n,y,B,e.history,s,h)},variant:"contained",color:"primary",size:"large",children:"Login"}),Object(K.jsx)(J.a,{color:"primary",size:"large",className:t.forgetButton,children:"Forget Password"})]})]}),1===g&&Object(K.jsxs)(i.a.Fragment,{children:[Object(K.jsx)(_.a,{variant:"h1",className:t.greeting,children:"Welcome!"}),Object(K.jsx)(_.a,{variant:"h2",className:t.subGreeting,children:"Create your account"}),Object(K.jsx)(yt.a,{in:p,children:Object(K.jsx)(_.a,{color:"secondary",className:t.errorMessage,children:"Something is wrong with your login or password :("})}),Object(K.jsx)(_e.a,{id:"name",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:O,onChange:function(e){return f(e.target.value)},margin:"normal",placeholder:"Full Name",type:"text",fullWidth:!0}),Object(K.jsx)(_e.a,{id:"email",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:y,onChange:function(e){return k(e.target.value)},margin:"normal",placeholder:"Email Adress",type:"email",fullWidth:!0}),Object(K.jsx)(_e.a,{id:"password",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:B,onChange:function(e){return T(e.target.value)},margin:"normal",placeholder:"Password",type:"password",fullWidth:!0}),Object(K.jsx)("div",{className:t.creatingButtonContainer,children:c?Object(K.jsx)(kt.a,{size:26}):Object(K.jsx)(J.a,{onClick:function(){return he(n,y,B,e.history,s,h)},disabled:0===y.length||0===B.length||0===O.length,size:"large",variant:"contained",color:"primary",fullWidth:!0,className:t.createAccountButton,children:"Create your account"})}),Object(K.jsxs)("div",{className:t.formDividerContainer,children:[Object(K.jsx)("div",{className:t.formDivider}),Object(K.jsx)(_.a,{className:t.formDividerWord,children:"or"}),Object(K.jsx)("div",{className:t.formDivider})]}),Object(K.jsxs)(J.a,{size:"large",className:S()(t.googleButton,t.googleButtonCreating),children:[Object(K.jsx)("img",{src:Nt,alt:"google",className:t.googleIcon}),"\xa0Sign in with Google"]})]})]})})]})})),Tt=["component"],At=["component"];function Ft(){var e=function(){var e=i.a.useContext(ce);if(void 0===e)throw new Error("useUserState must be used within a UserProvider");return e}().isAuthenticated;return Object(K.jsx)(w.a,{children:Object(K.jsxs)(y.d,{children:[Object(K.jsx)(y.b,{exact:!0,path:"/",render:function(){return Object(K.jsx)(y.a,{to:"/app/dashboard"})}}),Object(K.jsx)(y.b,{exact:!0,path:"/app",render:function(){return Object(K.jsx)(y.a,{to:"/app/dashboard"})}}),Object(K.jsx)(t,{path:"/app",component:mt}),Object(K.jsx)(n,{path:"/login",component:Bt}),Object(K.jsx)(y.b,{component:ft})]})});function t(t){var n=t.component,a=Object(v.a)(t,Tt);return Object(K.jsx)(y.b,Object(l.a)(Object(l.a)({},a),{},{render:function(t){return e?i.a.createElement(n,t):Object(K.jsx)(y.a,{to:{pathname:"/login",state:{from:t.location}}})}}))}function n(t){var n=t.component,a=Object(v.a)(t,At);return Object(K.jsx)(y.b,Object(l.a)(Object(l.a)({},a),{},{render:function(t){return e?Object(K.jsx)(y.a,{to:{pathname:"/"}}):i.a.createElement(n,t)}}))}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(K.jsx)(ae,{children:Object(K.jsx)(de,{children:Object(K.jsxs)(c.a,{theme:f.default,children:[Object(K.jsx)(s.a,{}),Object(K.jsx)(Ft,{})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[224,1,2]]]);
//# sourceMappingURL=main.90348452.chunk.js.map